РЕКОМЕНДАЦИИ ПО СОСТАВЛЕНИЮ ДИН СПИСКА
1. Нужно стараться делать простые запросы для динамических списков.
2. Необходимо выбрать один из трех режимов работы динамического списка:
Динамическое считывание данных включено (рекомендуется)
Динамическое считывание данных выключено, задана не виртуальная основная таблица или одна из следующих таблиц: СрезПервых, СрезПоследних, ЗадачиПоИсполнителю, КритерииОтбора, ДвижениеСубконто.
Динамическое считывание данных выключено, основная таблица не задана.
3. Проиндексировать необходимые поля.
4. Настоятельно не рекомендуется использовать конструкции, «утяжеляющие» запрос:
РАЗЛИЧНЫЕ и СГРУППИРОВАТЬ ПО
ВЫБОР в предложении ГДЕ или в условиях соединения;
упорядочивание по полю, полученному при помощи конструкции ВЫБОР, в том числе и пользовательское.
5. Соединяться в запросе следует только с небольшим количеством реальных таблиц.
6. Стараться избегать соединения с виртуальными и временными таблицами.
7. Предусмотреть оптимизацию при работе с полями составного типа.
8. Запрос динамического списка рекомендуется менять «на лету» на более оптимальный, если это возможно.

ПЕРЕОПРЕДЕЛЕНИЕ ДИН СПИСКА ПРОГРАММНО
--- Переименовать таблицу в запросе (справочник.Номенклатура КАК НоменклатураПереопределнный)
--- Добавить поле в запрос (ВЫЗАРЗИТЬ NULL КАК Число (15,2) КАК Остаток)
--- в процедуру СписокПриПолученииДанныхНаСервере добавить заполнение нового поля 

&НаСервереБезКонтекста
Процедура СписокПриПолученииДанныхНаСервере(ИмяЭлемента, Настройки, Строки)

Запрос = Новый Запрос;
Запрос.Текст = "ВЫБРАТЬ
| ОстаткиНоменклатурыОстатки.Номенклатура КАК Номенклатура,
| ОстаткиНоменклатурыОстатки.КоличествоОстаток КАК КоличествоОстаток
|ИЗ
| РегистрНакопления.ОстаткиНоменклатуры.Остатки(, Номенклатура В (&СписокНоменклатуры)) КАК ОстаткиНоменклатурыОстатки";
Запрос.УстановитьПараметр("СписокНоменклатуры", Строки.ПолучитьКлючи());
Выборка = Запрос.Выполнить().Выбрать();
Пока Выборка.Следующий() Цикл
СтрокаСписка = Строки[Выборка.Номенклатура];
СтрокаСписка.Данные["Остаток"] = Выборка.КоличествоОстаток;
СтрокаСписка.Оформление["Остаток"].УстановитьЗначениеПараметра("Формат", "ЧЦ=15; ЧДЦ=2; ЧН=-");
КонецЦикла;

КонецПроцедуры


ПЕРЕОПРЕДЕЛЕНИЕ ЗАПРОСА ДИН СПИСКА

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

ТекстЗапроса= "ВЫБРАТЬ
| Контрагенты.Ссылка КАК Ссылка,
| Контрагенты.ВерсияДанных КАК ВерсияДанных,
| Контрагенты.ИмяПредопределенныхДанных КАК ИмяПредопределенныхДанных
|ИЗ
| Справочник.Контрагенты КАК Контрагенты
|ГДЕ
| Контрагенты.Код = &Код";
СвойстваСписка = ОбщегоНазначения.СтруктураСвойствДинамическогоСписка();
СвойстваСписка.ОсновнаяТаблица = "Справочник.Контрагенты";
СвойстваСписка.ДинамическоеСчитываниеДанных = Истина;
СвойстваСписка.ТекстЗапроса = ТекстЗапроса;
ОбщегоНазначения.УстановитьСвойстваДинамическогоСписка(Элементы.Список,СвойстваСписка);
Список.Параметры.УстановитьЗначениеПараметра("Код", "000000001");

КонецПроцедуры
